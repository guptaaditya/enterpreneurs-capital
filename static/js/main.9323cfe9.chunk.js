(this["webpackJsonpadventure-capital"]=this["webpackJsonpadventure-capital"]||[]).push([[0],[,,,,,,,,,function(e){e.exports=JSON.parse('[{"id":"coffee","name":"Coffee cafe","revenue":10,"time":500,"cost":50,"managerCost":10000,"upgradeCost":150000,"icon":"/img/coffee.svg","upgradePromotionText":"Cookies can shoot profit 3x","managerIcon":"/img/manager.png","unitName":"Cafe"},{"id":"beer","name":"Beer Bars","revenue":100,"time":3000,"cost":400,"managerCost":100000,"upgradeCost":1500000,"icon":"/img/beer.svg","upgradePromotionText":"New Beer mugs can increase profit 3x","managerIcon":"/img/beer-manager.svg","unitName":"Bar"},{"id":"fifa","name":"FIFA Clubs","revenue":10000,"time":9000,"cost":55000,"managerCost":1000000,"upgradeCost":15000000,"icon":"/img/fifa.png","upgradePromotionText":"Visitors ticket = 3x profit","managerIcon":"/img/fifa-manager.svg","unitName":"Club"},{"id":"fam","name":"Financial Mgmt.","revenue":2000000,"time":12000,"cost":5000000,"managerCost":10000000,"upgradeCost":150000000,"icon":"/img/fam.svg","upgradePromotionText":"Risk analysis triples your profit","managerIcon":"/img/fam-manager.svg","unitName":"Office"}]')},,function(e,n,a){},,,function(e,n,a){e.exports=a(25)},,,,,function(e,n,a){},function(e,n,a){},function(e,n,a){},,,function(e,n,a){},function(e,n,a){"use strict";a.r(n);var t=a(0),s=a.n(t),r=a(12),i=a.n(r),c=(a(19),a(13)),o=a(7),u=a(1),l=a(2),m=a(4),p=a(3),d=a(5),h=a(28),g=(a(20),a(21),function(e){function n(){return Object(u.a)(this,n),Object(m.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,a=e.children;return s.a.createElement("div",{className:n},a)}}]),n}(s.a.PureComponent)),v=a(6),b=a.n(v);a(11);function f(e){var n=e.toString();return n.length>=10?(e/Math.pow(10,9)).toFixed(3).toLocaleString("en")+" Billion":n.length>=13?(e/Math.pow(10,12)).toFixed(3).toLocaleString("en")+" Trillion":e.toLocaleString("en")}var O={export:function(e,n){this.exportAsIs(e,JSON.stringify(n))},import:function(e){var n=this.importAsIs(e),a=null;if(n)try{a=JSON.parse(n)}catch(t){console.log(t)}return a},exportAsIs:function(e,n){return window.localStorage.setItem(e,n)},importAsIs:function(e){return window.localStorage.getItem(e)}},E=function(e){function n(){var e,a;Object(u.a)(this,n);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(n)).call.apply(e,[this].concat(s)))).state={canInvest:!1},a.subscriptionChanges=null,a.handlePurchaseClick=function(){(0,a.props.onPurchase)()},a}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,a=n.canInvest,t=n.stateObserver;this.subscriptionChanges=t.subscribe((function(){e.setState({canInvest:a()})}))}},{key:"componentWillUnmount",value:function(){this.subscriptionChanges&&this.subscriptionChanges.unsubscribe()}},{key:"render",value:function(){var e=this.props.business,n=(e=void 0===e?{}:e).name,a=e.cost,t=this.state.canInvest;return s.a.createElement("fieldset",null,s.a.createElement("legend",null,s.a.createElement("h3",{className:"display-inline"},n)),s.a.createElement("hr",{className:"ruler"}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col purchase-business",onClick:this.handlePurchaseClick},s.a.createElement("span",{className:b()("c2a",{disabled:!t})},"Buy for ",s.a.createElement("span",{className:"currency"},"$",f(a)),"\xa0"),s.a.createElement("img",{className:"encircle",src:"".concat("/enterpreneurs-capital","/img/invest.svg"),width:"25"}))))}}]),n}(s.a.PureComponent),y=a(8),C=a.n(y),N=function(e){function n(){var e;return Object(u.a)(this,n),(e=Object(m.a)(this,Object(p.a)(n).call(this))).state={isRunEnabled:!0},e.isRunByManager=!1,e.progressNode=null,e.autoRunBusinessHandler=null,e.runBusinessOnceTimer=null,e.resetSubscription=null,e.handleRef=function(n){e.progressNode=n,e.forceUpdate()},e.animationHandler=function(){e.progressNode&&(e.progressNode.classList.remove("fill"),setTimeout((function(){return e.progressNode.classList.add("fill")}),0))},e.animationStop=function(){e.progressNode.classList.remove("fill")},e.generateRevenue=function(){var n=e.props;(0,n.onRevenue)(n.business.revenueBusinessGenerates)},e.handleRunBusiness=function(){if(!0!==e.isRunByManager&&!0!==e.isStarted){e.isStarted=!0;var n=e.props.business,a=(n=void 0===n?{}:n).time;e.animationHandler(),e.setState({isRunEnabled:!1}),e.runBusinessOnceTimer=setTimeout((function(){e.generateRevenue(),e.isStarted=!1,e.setState({isRunEnabled:!0}),e.animationStop()}),a)}},e.handleAutoStartBusiness=function(){clearTimeout(e.runBusinessOnceTimer),e.setState({isRunEnabled:!0});var n=e.props.business,a=(n=void 0===n?{}:n).time;e.animationHandler(),e.autoRunBusinessHandler=setInterval((function(){e.generateRevenue()}),a)},e.handleRunBusiness=C.a.debounce(e.handleRunBusiness,100,{leading:!1,trailing:!0}),e}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props.resetObserver;this.resetSubscription=n.subscribe((function(n){n&&e.autoRunBusinessHandler&&(clearInterval(e.autoRunBusinessHandler),e.resetSubscription.unsubscribe())}))}},{key:"componentWillUnmount",value:function(){this.resetSubscription&&this.resetSubscription.unsubscribe(),this.autoRunBusinessHandler&&clearInterval(this.autoRunBusinessHandler),this.runBusinessOnceTimer&&clearTimeout(this.runBusinessOnceTimer)}},{key:"componentWillUpdate",value:function(e){var n=e.business;(n=void 0===n?{}:n).hasManager&&!this.isRunByManager&&this.progressNode&&(this.isRunByManager=!0,this.handleAutoStartBusiness())}},{key:"render",value:function(){var e=this.props.business,n=(e=void 0===e?{}:e).icon,a=e.time,t=e.hasManager,r=void 0!==t&&t,i=this.state.isRunEnabled,c={onClick:r?C.a.noop:this.handleRunBusiness};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col"},s.a.createElement(g,{className:"txt-align-right p-r-20"},s.a.createElement("img",Object.assign({src:"".concat("/enterpreneurs-capital").concat(n),width:"25",className:b()("encircle c2a runBusiness",{"nocursor top-left":r},{hidden:!i})},c)),s.a.createElement("div",{className:"progressSlim"},s.a.createElement("div",{ref:this.handleRef,style:{animationDuration:"".concat(a,"ms"),animationIterationCount:this.isRunByManager?"infinite":1}})))))}}]),n}(s.a.PureComponent),B=function(e){function n(e){var a;return Object(u.a)(this,n),(a=Object(m.a)(this,Object(p.a)(n).call(this,e))).handleBusinessUpgrade=function(){if(a.canUpgrade()){var e=a.props;(0,e.upgradeBusiness)(e.business.id)}},a.handleBuyMore=function(){if(a.canInvest()){var e=a.props;(0,e.buyBranch)(e.business.id)}},a.handleHireManager=function(){var e=a.props,n=e.hireManager,t=e.business,s=t.hasManager,r=t.id;!0!==s&&a.canHireManager()&&n(r)},a.canHireManager=function(){var e=a.props,n=e.getCapital,t=e.business,s=(t=void 0===t?{}:t).managerCost;return Boolean(s<=n())},a.canInvest=function(){var e=a.props,n=e.getCapital,t=e.business,s=(t=void 0===t?{}:t).cost;return Boolean(s<=n())},a.canUpgrade=function(){var e=a.props,n=e.getCapital,t=e.business,s=(t=void 0===t?{}:t).upgradeCost;return Boolean(s<=n())},a.state={isStarted:!1,canHireManager:!1,canBuyMore:!1,canUpgrade:!1},a}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,a=n.stateObserver,t=n.business,s=t.hasManager,r=t.isUpgraded;a.subscribe((function(){s||e.setState({canHireManager:e.canHireManager()}),r||e.setState({canUpgrade:e.canUpgrade()}),e.setState({canBuyMore:e.canInvest()})}))}},{key:"render",value:function(){var e=this.props,n=e.stateObserver,a=e.resetObserver,t=e.business,r=(t=void 0===t?{}:t).hasManager,i=void 0!==r&&r,c=t.name,o=t.branchCount,u=void 0===o?1:o,l=t.isPurchased,m=void 0!==l&&l,p=t.cost,d=t.upgradeCost,h=t.managerCost,v=t.revenueBusinessGenerates,O=t.isUpgraded,y=void 0!==O&&O,C=t.upgradePromotionText,B=t.managerIcon,w=t.unitName,j=e.onRevenue,S=this.state,M=S.canHireManager,k=S.canBuyMore,R=S.canUpgrade,I=Boolean(i||M),x=k,P=R;return s.a.createElement(g,{className:"borderBox"},i&&s.a.createElement("img",{className:"top-right",src:"".concat("/enterpreneurs-capital").concat(B),width:"30"}),m&&s.a.createElement("fieldset",null,s.a.createElement("legend",null,s.a.createElement("h3",{className:"display-inline"},c)," x ",u),s.a.createElement("hr",{className:"ruler"}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-2"},s.a.createElement("div",{className:"txt-align-left p-l-20"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("span",{onClick:this.handleBuyMore,className:b()("buy-more-units c2a",{disabled:!x},{"blink-image":x})},"Buy next ",w," for ",s.a.createElement("span",{className:"currency"},"$",f(p))))),!i&&s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(g,null,s.a.createElement("span",{className:b()("c2a",{disabled:!I},{"blink-image":I}),onClick:this.handleHireManager},"Hire ",s.a.createElement("img",{src:"".concat("/enterpreneurs-capital").concat(B),width:"30"}),"for ",s.a.createElement("span",{className:"currency"},"$",f(h)))))),!y&&s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(g,null,s.a.createElement("span",{className:b()("upgrade-business c2a",{disabled:!P},{"blink-image":P}),onClick:this.handleBusinessUpgrade},C," -> costs ",s.a.createElement("span",{className:"currency"},"$",f(d)))))))),s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col txt-align-right p-r-20"},s.a.createElement("span",null,"+",s.a.createElement("span",{className:"currency"},f(v))))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(N,{resetObserver:a,business:this.props.business,onRevenue:j})))))),!m&&s.a.createElement(E,{canInvest:this.canInvest,onPurchase:this.handleBuyMore,business:this.props.business,stateObserver:n}))}}]),n}(s.a.PureComponent);a(24);function w(e){return s.a.createElement("div",{onClick:e.onReset,className:"reset top-right"},s.a.createElement("img",{src:"".concat("/enterpreneurs-capital","/img/reset.svg"),width:"40"}))}var j=a(9),S=3,M=4,k=50;function R(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function I(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?R(a,!0).forEach((function(n){Object(c.a)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function x(){var e=[];return{creator:function(n){e.push(n);var a=e.length-1;return function(){return e[a]=null}},publisher:function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];e.forEach((function(e){e&&e.next.apply(e,a)}))}}}var P=x(),A=x(),H=function(e){function n(){var e,a;Object(u.a)(this,n);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(n)).call.apply(e,[this].concat(s)))).state={owner:{capital:k,businesses:j}},a.stateChangeObserver=null,a.resetObserver=null,a.setStateAndPublishChanges=function(e,n){a.setState(e,(function(){(n||P.publisher)(a.state),a.exportData()}))},a.onGetCapital=function(){return a.state.owner.capital},a.getBusinessById=function(e,n){var a=n.findIndex((function(n){return n.id===e}));return Object.assign({},n[a])},a.onBuyBranch=function(e){var n=Object(o.a)(a.state.owner.businesses),t=n.findIndex((function(n){return n.id===e})),s=Object.assign({},n[t]),r=a.state.owner;if(!(r.capital<s.cost)){var i=r.capital-s.cost,c=(s.branchCount||0)+1;s.branchCount=c,s.isPurchased=!0,s.revenueBusinessGenerates=s.branchCount*s.revenue;var u=s.cost*(M/100);return s.cost+=Math.floor(u),n[t]=s,a.setStateAndPublishChanges({owner:I({},r,{capital:i,businesses:n})}),!0}},a.handleReset=function(){a.setStateAndPublishChanges({owner:{capital:k,businesses:j}},(function(){A.publisher(!0),P.publisher(!1,a.state)}))},a.handleHireManager=function(e){var n=Object(o.a)(a.state.owner.businesses),t=n.findIndex((function(n){return n.id===e})),s=Object.assign({},n[t]),r=a.state.owner;if(!(r.capital<s.managerCost)){s.hasManager=!0;var i=r.capital-s.managerCost;return n[t]=s,a.setStateAndPublishChanges({owner:I({},r,{capital:i,businesses:n})}),!0}},a.handleBusinessUpgrade=function(e){var n=Object(o.a)(a.state.owner.businesses),t=n.findIndex((function(n){return n.id===e})),s=Object.assign({},n[t]),r=a.state.owner;if(!(r.capital<s.upgradeCost)){s.isUpgraded=!0,s.revenue*=S,s.revenueBusinessGenerates=s.branchCount*s.revenue;var i=r.capital-s.upgradeCost;return n[t]=s,a.setStateAndPublishChanges({owner:I({},r,{capital:i,businesses:n})}),!0}},a.addCapital=function(e){var n=a.state.owner,t=n.capital+e;a.setStateAndPublishChanges({owner:I({},n,{capital:t})},(function(){P.publisher(!0,a.state)}))},a.onInvestCapital=function(e){var n=a.state.owner,t=n.capital;return e<=t&&(t-=e,a.setStateAndPublishChanges({owner:I({},n,{capital:t})}),!0)},a}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.loadData();e?this.setStateAndPublishChanges(e):P.publisher()}},{key:"exportData",value:function(){var e=this.state.owner,n=(e=void 0===e?{}:e).capital,a=e.businesses,t={timeOfExit:(new Date).getTime(),businesses:Object(o.a)(a),capital:n};return O.export("enterpreneurs-capital",t),!0}},{key:"loadData",value:function(){var e=O.import("enterpreneurs-capital");if(e&&e.businesses&&e.timeOfExit){var n=(new Date).getTime()-e.timeOfExit,a=e.businesses.filter((function(e){return e.hasManager})).reduce((function(e,a){return e+a.revenueBusinessGenerates*(n/a.time)}),0);return{owner:{capital:Math.floor(a+(e.capital||0)),businesses:e.businesses}}}return null}},{key:"render",value:function(){var e=this,n=this.state.owner,a=(n=void 0===n?{}:n).businesses,t=n.capital,r={getCapital:this.onGetCapital,investCapital:this.onInvestCapital,buyBranch:this.onBuyBranch,onRevenue:this.addCapital,hireManager:this.handleHireManager,upgradeBusiness:this.handleBusinessUpgrade};this.stateChangeObserver||(this.stateChangeObserver=h.a.create(P.creator)),this.resetObserver||(this.resetObserver=h.a.create(A.creator));var i=a.map((function(n,a){return s.a.createElement("div",{className:"col",key:a},s.a.createElement(B,Object.assign({stateObserver:e.stateChangeObserver,resetObserver:e.resetObserver,business:n},r)))}));return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"game"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(g,{className:"border p-btm-15"},s.a.createElement("h3",null,s.a.createElement("span",{role:"img"},"\ud83d\udcb0"),"\xa0 Available capital ",s.a.createElement("span",{className:"currency"},"$",f(t)))))),s.a.createElement("div",{className:"row"},i),s.a.createElement(w,{onReset:this.handleReset})))}}]),n}(s.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.9323cfe9.chunk.js.map